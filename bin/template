#!/bin/bash

src=""
dst=""
cmd=$1
shift

TEMPLATES_DIR=~/Templates

do_command()
{
	if [[ $cmd == "add" ]] ; then
		add_command
	elif [[ $cmd == "use" ]] ; then
		use_command
	elif [[ $cmd == "show" ]] ; then
		show_command
	elif [[ $cmd == "show" ]] ; then
		show_command
	fi
}


show_command()
{
	if [[ $(uname) == Darwin ]] ; then
		open $TEMPLATES_DIR/$src
	else
		gvfs-open $TEMPLATES_DIR/$src
	fi
}

add_command()
{
	if [[  "$dst" == "" ]] ; then
		dst=$src
	fi

	if [ -e $TEMPLATES_DIR/$dst ] ; then
		echo "Destination $dst already exists"
		return
	fi


	echo ADDING
	cp -R $src $TEMPLATES_DIR/$dst
}

use_command()
{
	if [[ "$dst" == "" ]] ; then
		dst=$src
	fi

	if [ -e $dst ] ; then
		echo "Destination $dst already exists"
		return
	fi

	cp -R $TEMPLATES_DIR/$src $dst
}

while [[ $# -gt 1 ]]
do
	option=$1
	optarg=$2
	case $option in
		-s|--src)
			src=$optarg
			shift
			;;
		-d|--dst)
			dst=$optarg
			shift
			;;
		*)
			echo "unknown option $option"
	esac
	shift
done


do_command
